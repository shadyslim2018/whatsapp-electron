# Maintainer: Your Name <you@email.com>
pkgname=whatsapp-electron
pkgver=1.0.0
pkgrel=1
pkgdesc="Unofficial WhatsApp Web desktop wrapper (Electron) â€“ runs with system Electron"
arch=('x86_64')
url="https://example.com/whatsapp-electron"
license=('MIT')
depends=('electron' 'gtk3' 'nss' 'libxss' 'libnotify')  # system electron runtime + common deps
makedepends=()  # if you keep extra npm deps, add: 'nodejs' 'npm'
source=(
  'main.js'
  'package.json'
  'icon.png'
  'whatsapp-electron.desktop'
)
sha256sums=('SKIP' 'SKIP' 'SKIP' 'SKIP')

build() {
  # If your app has no runtime npm deps, nothing to do here.
  # If you DO have deps (e.g., electron-auto-launch), uncomment:
  # npm ci --omit=dev
  :
}

package() {
  # App payload
  install -d "$pkgdir/usr/lib/whatsapp-electron"
  install -m644 "$srcdir/main.js"        "$pkgdir/usr/lib/whatsapp-electron/"
  install -m644 "$srcdir/package.json"   "$pkgdir/usr/lib/whatsapp-electron/"
  install -m644 "$srcdir/icon.png"       "$pkgdir/usr/lib/whatsapp-electron/"

  # If you installed node_modules in build(), ship them too:
  # cp -a node_modules "$pkgdir/usr/lib/whatsapp-electron/"

  # Launcher
  install -d "$pkgdir/usr/bin"
  printf '#!/bin/sh\nexec /usr/bin/electron /usr/lib/whatsapp-electron "$@"\n' \
    > "$pkgdir/usr/bin/whatsapp-electron"
  chmod 755 "$pkgdir/usr/bin/whatsapp-electron"

  # Desktop entry + menu icon
  install -Dm644 "$srcdir/whatsapp-electron.desktop" \
    "$pkgdir/usr/share/applications/whatsapp-electron.desktop"
  install -Dm644 "$srcdir/icon.png" \
    "$pkgdir/usr/share/icons/hicolor/256x256/apps/whatsapp-electron.png"
}

